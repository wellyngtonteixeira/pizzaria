{"version":3,"sources":["../../src/pages/home/home.module.ts","../../src/pages/home/home.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import { NgModule } from \"@angular/core\";\nimport {HomePage} from \"./home\";\nimport {IonicPageModule} from \"ionic-angular\";\n\n@NgModule({\n    declarations: [HomePage],\n    imports: [IonicPageModule.forChild(HomePage)]\n})\nexport class HomeModule {\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","import {Component, OnInit} from '@angular/core';\nimport {IonicPage, NavController} from 'ionic-angular';\nimport {PedidosService} from \"../../services/pedidos/pedidos.service\";\nimport {Observable} from \"rxjs\";\nimport {map} from 'rxjs/operators'\nimport {Pedido} from \"../../models/pedido.model\";\n\n\n@IonicPage()\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html'\n})\nexport class HomePage implements OnInit{\n\n  pedidos_db$: Observable<Pedido[]>;\n  dt_parametro: Date;\n  str_dt_valida: string;\n\n\n  constructor(public navCtrl: NavController, private pedidosService: PedidosService) {\n\n  }\n\n  ngOnInit(): void {\n      this.confereData()\n      this.formataData()\n      //console.log(this.str_dt_valida);\n      this.pedidos_db$ = this.pedidosService.getPedidosPorHorario()\n          .snapshotChanges()\n          .pipe(map( changes => {\n              let st1 = changes.filter(f => f.payload.val().status === \"fila\"\n              );\n              let st2 = st1.filter(f2 => f2.payload.val().dt === this.str_dt_valida);\n              return st2.map(rt => {return {key: rt.payload.key,...rt.payload.val()}});\n          }))\n\n   }\n\n   confereData(){\n      let dt_primeiro = new Date(\"2019-05-04\");\n      let dt_segundo = new Date(\"2019-05-05\");\n\n      if(new Date().toLocaleDateString() == dt_primeiro.toLocaleDateString()){\n          this.dt_parametro = dt_primeiro;\n      }\n      else if (new Date().toLocaleDateString() == dt_segundo.toLocaleDateString()){\n          this.dt_parametro = dt_segundo;\n      } else {\n          this.dt_parametro = dt_primeiro;\n      }\n   }\n\n   formataData(){\n\n      let ano = this.dt_parametro.getFullYear()\n       let mes = this.dt_parametro.getMonth()+1\n       let mes_s = mes.toString();\n       if(mes < 10){\n           mes_s = \"0\"+mes_s\n       }\n\n       let dia = this.dt_parametro.getDate()\n       let dia_s = dia.toString()\n       if(dia < 10){\n           dia_s = \"0\"+dia_s\n       }\n\n       this.str_dt_valida = ano+\"-\"+mes_s+\"-\"+dia_s;\n\n   }\n\n    toArray(answers: object) {\n        return Object.keys(answers).map(key => answers[key])\n    }\n\n    entregaPedido(pedido: Pedido){\n      pedido.status = \"entregue\";\n      this.pedidosService.editPedido(pedido).then(rf => {\n          this.navCtrl.setRoot('HomePage');\n      });\n    }\n\n    cancelaPedido(pedido: Pedido){\n        pedido.status = \"cancelado\";\n        this.pedidosService.editPedido(pedido).then(rf => {\n            this.navCtrl.setRoot('HomePage');\n        });\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts"],"sourceRoot":""}